<head>
  <title>Mite Zyt-Rächnig</title>
</head>

<body>
  {{> head}}
  {{> calendar}}
</body>

<template name="head">
<div class="navbar navbar-top">
	<div class="navbar-inner">
  	<div class="container">
    	<span class="brand">Mite Zyt-Rächnig für's Jahr
      	<button id="lastyear" class="btn btn-mini btn-danger" type="button">-</button>
        {{current.year}}
        <button id="nextyear" class="btn btn-mini btn-success" type="button">+</button>
      </span>
    </div>
  </div>
  	<div class="navbar-inner">
    	<div class="container">
      	{{> settings}}
  		</div>
  	</div>
	</div>
</div>
</template>

<template name="settings">
	{{#if notAllSet}}
  	<a class="accordion-toggle" data-toggle="collapse" data-target="#settings" href="#collapseOne">
  	nöd alles xetzt
  	</a>
		<div id="settings" class="collapse in">
	{{else}}
		<a class="accordion-toggle" data-toggle="collapse" data-target="#settings" href="#collapseOne">
  	iigloggt als {{user.name}}
  	</a>
		<div id="settings" class="collapse">
	{{/if}}
	<form class="form-inline" action="POST">
    	<fieldset>
        	<label>
       			Mite API-Key:
       		</label>
       		<input id='apiKey' type='text' name='apiKey' placeholder='Diin API-Key' value='{{apiKey}}'>
       		<br />
       		<label>
        			Mite Host (dä teil vor mite.yo.lk):
       		</label>
       		<input id='miteHost' type='text' name='miteHost' placeholder='diin Mite Host' value='{{miteHost}}'>
       		<br />
       		<label>
       			Teilzytgrad:
       		</label>
       		<input id='tzg' type='text' name='tzg' placeholder='Teilzytgrad' value='{{tzg}}'>
       		<br />
					{{#if notAllSet}}
						<button id='saveSettings' class='btn'>speichere</button>
					{{else}}
						<button id='saveSettings' class='btn'>ändere</button>
       		{{/if}}
       	</fieldset>
	</form>
</div>
</template>

<template name="settings_saved">
    <small>¯
      <a id="optout" href="#">not {{user.name}} ({{user.email}})?</a>
    </small>
</template>

<template name="calendar">
	
		<div class="calendar">
		{{#each months}}
			<ol class="month">
				<li class="monthtitle">
				<span>{{this.name}}</span>
				</li>
				<li class="daystitle">
			    	MO
			    </li>	
				<li class="daystitle">
			    	DI
			    </li>	
				<li class="daystitle">
			    	MI
			    </li>	
				<li class="daystitle">
			    	DO
			    </li>	
				<li class="daystitle">
			    	FR
			    </li>	
				<li class="daystitle">
			    	SA
			    </li>	
				<li class="daystitle">
			    	SO
			    </li>	
			    {{#each this.days_before}}
					<li class="lastmonth">{{this}}</li>
				{{/each}}
				{{#each this.days}}
					<li class="currentmonth">
						<span>{{this}}</span>
						<p>
						<span class="soll">8.24</span>
						<span class="ist">8.13</span>
						</ br>
						<span class="total">13d 0.8h<span>
						</p>
					</li>
				{{/each}}
				{{#each this.days_after}}
					<li class="nextmonth">{{this}}</li>
				{{/each}}
				{{#if this.empty_line}}
				<li class="emptyday">
			    </li>	
				<li class="emptyday">
			    </li>	
				<li class="emptyday">
			    </li>	
				<li class="emptyday">
			    </li>	
				<li class="emptyday">
			    </li>	
				<li class="emptyday">
			    </li>	
				<li class="emptyday">
			    </li>
				{{/if}}
			</ol>

		{{/each}}
	</div>
</template>